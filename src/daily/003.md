Rust 中 Result 和 Option 方法速查表

Result<T, E> 方法

解包和提取

• unwrap() -> T - 返回 Ok 值，Err 则 panic

• unwrap_err() -> E - 返回 Err 值，Ok 则 panic

• unwrap_or(default: T) -> T - 返回 Ok 值或默认值

• unwrap_or_else(f: FnOnce(E) -> T) -> T - Ok 返回值，Err 执行闭包

• expect(msg: &str) -> T - 类似 unwrap 但带自定义 panic 消息

• expect_err(msg: &str) -> E - 类似 unwrap_err 但带自定义消息

状态检查

• is_ok() -> bool - 检查是否为 Ok

• is_err() -> bool - 检查是否为 Err

• contains(&x: &T) -> bool - 检查 Ok 值是否等于 x

• contains_err(&x: &E) -> bool - 检查 Err 值是否等于 x

转换映射

• map<U, F: FnOnce(T) -> U>(f: F) -> Result<U, E> - Ok 时应用函数转换

• map_err<F, O: FnOnce(E) -> F>(f: O) -> Result<T, F> - Err 时应用函数转换

• map_or<U, F: FnOnce(T) -> U>(default: U, f: F) -> U - Ok 应用函数，否则返回默认值

• map_or_else<U, D: FnOnce(E) -> U, F: FnOnce(T) -> U>(default: D, f: F) -> U - Ok 应用 f，Err 应用 default

链式操作

• and<U>(res: Result<U, E>) -> Result<U, E> - Ok 时返回给定 Result

• and_then<U, F: FnOnce(T) -> Result<U, E>>(f: F) -> Result<U, E> - Ok 时应用返回 Result 的函数

• or<F>(res: Result<T, F>) -> Result<T, F> - Err 时返回给定 Result

• or_else<F, O: FnOnce(E) -> Result<T, F>>(f: O) -> Result<T, F> - Err 时应用返回 Result 的函数

类型转换

• ok() -> Option<T> - Ok→Some，Err→None

• err() -> Option<E> - Err→Some，Ok→None

• transpose() -> Option<Result<T, E>> - 转换 Result<Option<T>, E>

其他

• flatten() -> Result<T, E> - 展平嵌套 Result

• inspect<F: FnOnce(&T)>(f: F) -> Result<T, E> - 检查但不修改 Ok 值(1.76+)

• inspect_err<F: FnOnce(&E)>(f: F) -> Result<T, E> - 检查但不修改 Err 值(1.76+)

Option<T> 方法

解包和提取

• unwrap() -> T - 返回 Some 值，None 则 panic

• unwrap_or(default: T) -> T - 返回 Some 值或默认值

• unwrap_or_else(f: FnOnce() -> T) -> T - Some 返回值，None 执行闭包

• expect(msg: &str) -> T - 类似 unwrap 但带自定义 panic 消息

状态检查

• is_some() -> bool - 检查是否为 Some

• is_none() -> bool - 检查是否为 None

• is_some_and(F: FnOnce(&T) -> bool) -> bool - Some 且值满足谓词

• contains(&x: &T) -> bool - 检查 Some 值是否等于 x

转换映射

• map<U, F: FnOnce(T) -> U>(f: F) -> Option<U> - Some 时应用函数转换

• map_or<U, F: FnOnce(T) -> U>(default: U, f: F) -> U - Some 应用函数，否则返回默认值

• map_or_else<U, D: FnOnce() -> U, F: FnOnce(T) -> U>(default: D, f: F) -> U - Some 应用 f，None 应用 default

链式操作

• and<U>(optb: Option<U>) -> Option<U> - Some 时返回给定 Option

• and_then<U, F: FnOnce(T) -> Option<U>>(f: F) -> Option<U> - Some 时应用返回 Option 的函数

• or(optb: Option<T>) -> Option<T> - None 时返回给定 Option

• or_else<F: FnOnce() -> Option<T>>(f: F) -> Option<T> - None 时应用返回 Option 的函数

• xor(optb: Option<T>) -> Option<T> - 仅当一个是 Some 另一个是 None 时返回 Some

过滤

• filter<P: FnOnce(&T) -> bool>(predicate: P) -> Option<T> - Some 且满足谓词则保留

类型转换

• ok_or<E>(err: E) -> Result<T, E> - Some→Ok，None→Err(指定值)

• ok_or_else<E, F: FnOnce() -> E>(err: F) -> Result<T, E> - None 时执行闭包返回 Err

• transpose() -> Option<Result<T, E>> - 转换 Option<Result<T, E>>

其他

• flatten() -> Option<T> - 展平嵌套 Option

• zip<U>(other: Option<U>) -> Option<(T, U)> - 都是 Some 则返回元组

• zip_with<U, R, F: FnOnce(T, U) -> R>(other: Option<U>, f: F) -> Option<R> - 都是 Some 则应用函数

• inspect<F: FnOnce(&T)>(f: F) -> Option<T> - 检查但不修改 Some 值(1.76+)

• take() -> Option<T> - 取出值并留下 None

• replace(&mut self, value: T) -> Option<T> - 替换为 Some(value) 并返回旧值

• get_or_insert(&mut self, value: T) -> &mut T - 返回可变引用，None 则插入

• get_or_insert_with<F: FnOnce() -> T>(&mut self, f: F) -> &mut T - None 时执行闭包插入